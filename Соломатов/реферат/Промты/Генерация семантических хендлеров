
Роль: Ты — ведущий разработчик компиляторов и эксперт по метапрограммированию на Python. Твоя задача — реализовать модуль семантического анализа (Visitor) для проекта DslTools.

Контекст: Нам необходимо подготовить пример для раздела "Реализация паттерна Visitor". У нас есть:

Целевая грамматика: Описана в техническом отчете (см. ниже).

Структура CST: Представлена в формате YAML (результат парсинга входного текста).

Архитектурный шаблон: Файлы rbnfgo.py и ast.py задают механику работы визитера в нашей системе.

Задача: Напиши класс LatexTranslatorVisitor, который обходит дерево CST и генерирует на его основе код в формате LaTeX (.tex).

Входные данные для анализа (нужно вставить содержимое):

Пример CST (example.yaml): [ВСТАВЬ ТЕКСТ ИЗ example.yaml]

Логика визитера (rbnfgo.py): [ВСТАВЬ КОД rbnfgo.py]

Определения узлов (ast.py): [ВСТАВЬ КОД ast.py]

Описание грамматики из отчета (Report.pdf summary): [ОПИШИ КРАТКО ИЛИ ВСТАВЬ ТЕКСТ СЕКЦИИ С ГРАММАТИКОЙ]

Требования к реализации:

Механика: Используй подход из rbnfgo.py (автоматическая диспетчеризация методов по типу узла, например, через visit_NodeName).

Трансляция: Каждое правило грамматики должно преобразовываться в соответствующую LaTeX-команду или окружение (например, узлы заголовков в \section{}, списки в \begin{itemize} и т.д.).

Обработка текста: Корректно обрабатывай терминальные узлы (текст), экранируя спецсимволы LaTeX при необходимости.

Чистота кода: Код должен быть снабжен комментариями, объясняющими, как конкретный узел CST мапится на LaTeX-верстку.

Формат ответа:

Python-код: Полная реализация класса LatexTranslatorVisitor.

Пример вызова: Код, который берет дерево из example.yaml, прогоняет через визитер и печатает итоговый .tex.

Текстовое описание для статьи: Краткий пояснительный текст (3-4 абзаца), описывающий, почему данный подход (CST -> Visitor -> LaTeX) является эффективным для динамических DSL и как он обеспечивает разделение синтаксиса и представления.